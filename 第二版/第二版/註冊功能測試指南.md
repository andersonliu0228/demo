# 📝 註冊功能測試指南

## ✅ 已完成的功能

### 1. 註冊頁面組件
**檔案**: `frontend/src/components/Register.jsx`

**功能**:
- ✅ 用戶名輸入欄位
- ✅ Email 輸入欄位
- ✅ 密碼輸入欄位
- ✅ 確認密碼輸入欄位
- ✅ 表單驗證
- ✅ 錯誤訊息顯示
- ✅ 載入狀態
- ✅ 註冊成功提示
- ✅ 自動跳轉到登入頁面

### 2. 路由切換
**檔案**: `frontend/src/App.jsx`

**功能**:
- ✅ 登入/註冊頁面切換
- ✅ 狀態管理（currentView）
- ✅ 切換函數（handleSwitchToRegister, handleSwitchToLogin）

### 3. 登入頁面更新
**檔案**: `frontend/src/components/Login.jsx`

**新增**:
- ✅ 「尚未註冊？點此註冊」連結
- ✅ 切換到註冊頁面功能

### 4. API 整合
**檔案**: `frontend/src/lib/api.js`

**已有功能**:
- ✅ `authApi.register()` - 註冊 API
- ✅ 呼叫 `POST /api/v1/auth/register`

## 🚀 測試步驟

### 1. 啟動系統

```powershell
# 確保 Docker 容器正在運行
docker-compose ps

# 如果沒有運行，啟動系統
.\docker-start.ps1
```

### 2. 訪問前端

打開瀏覽器訪問: http://localhost:3000

### 3. 測試註冊流程

#### 步驟 1: 從登入頁面切換到註冊頁面
1. 在登入頁面底部找到「尚未註冊？點此註冊」
2. 點擊連結
3. 應該跳轉到註冊頁面（紫色主題）

#### 步驟 2: 填寫註冊表單
1. **用戶名**: 輸入 `newuser`（至少 3 個字元）
2. **Email**: 輸入 `newuser@example.com`
3. **密碼**: 輸入 `password123`（至少 6 個字元）
4. **確認密碼**: 輸入 `password123`（必須與密碼一致）

#### 步驟 3: 提交註冊
1. 點擊「註冊」按鈕
2. 按鈕應顯示「註冊中...」和載入動畫
3. 註冊成功後：
   - 顯示綠色成功頁面
   - 顯示「註冊成功！」訊息
   - 顯示「正在跳轉到登入頁面...」
   - 2 秒後自動跳轉到登入頁面

#### 步驟 4: 使用新帳號登入
1. 在登入頁面輸入剛才註冊的帳號
   - 用戶名: `newuser`
   - 密碼: `password123`
2. 點擊「登入」
3. 應該成功登入並進入儀表板

### 4. 測試表單驗證

#### 測試 1: 密碼不一致
1. 密碼: `password123`
2. 確認密碼: `password456`
3. 點擊註冊
4. 應顯示錯誤: 「密碼和確認密碼不一致」

#### 測試 2: 密碼太短
1. 密碼: `123`
2. 確認密碼: `123`
3. 點擊註冊
4. 應顯示錯誤: 「密碼長度至少需要 6 個字元」

#### 測試 3: Email 格式錯誤
1. Email: `invalidemail`（沒有 @）
2. 點擊註冊
3. 應顯示錯誤: 「請輸入有效的 Email 地址」

#### 測試 4: 用戶名已存在
1. 使用已註冊的用戶名（如 `testuser`）
2. 點擊註冊
3. 應顯示後端返回的錯誤訊息

### 5. 測試頁面切換

#### 從登入切換到註冊
1. 在登入頁面點擊「尚未註冊？點此註冊」
2. 應跳轉到註冊頁面

#### 從註冊切換到登入
1. 在註冊頁面點擊「已有帳號？點此登入」
2. 應跳轉到登入頁面

## 🎨 UI 設計

### 登入頁面
- **主題色**: 藍色（Blue）
- **背景**: 藍色到靛藍色漸層
- **圖標**: 鎖頭（Lock）

### 註冊頁面
- **主題色**: 紫色（Purple）
- **背景**: 紫色到粉紅色漸層
- **圖標**: 用戶（User）

### 註冊成功頁面
- **主題色**: 綠色（Green）
- **背景**: 綠色到翠綠色漸層
- **圖標**: 勾選圓圈（CheckCircle）

## 📊 API 測試

### 使用 PowerShell 測試註冊 API

```powershell
# 註冊新用戶
$body = @{
    username = "testuser2"
    email = "testuser2@example.com"
    password = "password123"
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:8000/api/v1/auth/register" `
  -Method POST `
  -ContentType "application/json" `
  -Body $body `
  -UseBasicParsing
```

### 預期回應

**成功 (201 Created)**:
```json
{
  "id": 2,
  "username": "testuser2",
  "email": "testuser2@example.com",
  "created_at": "2026-02-04T..."
}
```

**失敗 (400 Bad Request)** - 用戶名已存在:
```json
{
  "detail": "Username already exists"
}
```

## 🔍 故障排除

### 問題 1: 註冊按鈕無反應

**可能原因**:
- 表單驗證失敗
- 後端 API 未運行

**解決方案**:
```powershell
# 檢查後端狀態
docker-compose ps backend

# 查看後端日誌
docker-compose logs backend

# 測試後端 API
curl http://localhost:8000/health
```

### 問題 2: 註冊後沒有跳轉

**可能原因**:
- JavaScript 錯誤
- 狀態更新失敗

**解決方案**:
1. 打開瀏覽器開發者工具（F12）
2. 查看 Console 標籤的錯誤訊息
3. 查看 Network 標籤的 API 請求

### 問題 3: 顯示「註冊失敗」

**可能原因**:
- 用戶名已存在
- Email 已存在
- 網路連接問題

**解決方案**:
1. 嘗試使用不同的用戶名和 Email
2. 檢查後端日誌: `docker-compose logs backend`
3. 檢查網路連接

### 問題 4: 頁面樣式錯亂

**可能原因**:
- Tailwind CSS 未正確載入
- 熱更新問題

**解決方案**:
```powershell
# 重啟前端容器
.\docker-restart-frontend.ps1

# 清除瀏覽器快取
# Ctrl + Shift + R (硬重新整理)
```

## 📝 測試檢查清單

### 功能測試
- [ ] 可以從登入頁面切換到註冊頁面
- [ ] 可以從註冊頁面切換到登入頁面
- [ ] 可以填寫註冊表單
- [ ] 表單驗證正常工作
- [ ] 可以成功註冊新用戶
- [ ] 註冊成功後顯示成功頁面
- [ ] 2 秒後自動跳轉到登入頁面
- [ ] 可以使用新帳號登入

### UI 測試
- [ ] 登入頁面顯示藍色主題
- [ ] 註冊頁面顯示紫色主題
- [ ] 成功頁面顯示綠色主題
- [ ] 圖標正確顯示
- [ ] 按鈕有 hover 效果
- [ ] 載入狀態正確顯示
- [ ] 錯誤訊息正確顯示

### 驗證測試
- [ ] 密碼不一致時顯示錯誤
- [ ] 密碼太短時顯示錯誤
- [ ] Email 格式錯誤時顯示錯誤
- [ ] 用戶名已存在時顯示錯誤
- [ ] 必填欄位為空時無法提交

### API 測試
- [ ] 註冊 API 正確呼叫
- [ ] 請求格式正確（JSON）
- [ ] 回應處理正確
- [ ] 錯誤處理正確

## 🎯 完整測試流程

### 流程 1: 新用戶註冊並登入

1. **訪問前端**: http://localhost:3000
2. **點擊註冊**: 「尚未註冊？點此註冊」
3. **填寫表單**:
   - 用戶名: `demouser`
   - Email: `demo@example.com`
   - 密碼: `demo123456`
   - 確認密碼: `demo123456`
4. **提交註冊**: 點擊「註冊」按鈕
5. **等待成功**: 看到綠色成功頁面
6. **自動跳轉**: 2 秒後跳轉到登入頁面
7. **登入系統**:
   - 用戶名: `demouser`
   - 密碼: `demo123456`
8. **進入儀表板**: 成功登入

### 流程 2: 測試表單驗證

1. **訪問註冊頁面**
2. **測試密碼不一致**:
   - 密碼: `password123`
   - 確認密碼: `password456`
   - 點擊註冊
   - 應顯示錯誤
3. **修正密碼**: 確認密碼改為 `password123`
4. **測試 Email 格式**:
   - Email: `invalidemail`
   - 點擊註冊
   - 應顯示錯誤
5. **修正 Email**: 改為 `valid@example.com`
6. **成功註冊**

## 📚 相關文檔

- [前端Docker開發模式測試指南.md](./前端Docker開發模式測試指南.md)
- [用戶認證系統測試指南.md](./用戶認證系統測試指南.md)
- [README.md](./README.md)

## ✨ 總結

註冊功能已完全實現：

✅ **註冊頁面**
- 完整的表單欄位
- 表單驗證
- 錯誤處理
- 成功提示

✅ **路由切換**
- 登入/註冊頁面切換
- 簡單的狀態管理
- 流暢的用戶體驗

✅ **API 整合**
- 呼叫註冊 API
- 錯誤處理
- 成功回調

✅ **UI 設計**
- 一致的設計風格
- 不同頁面的主題色
- 響應式設計

現在用戶可以：
1. 在登入和註冊頁面之間切換
2. 註冊新帳號
3. 使用新帳號登入系統

開始測試吧！🚀
